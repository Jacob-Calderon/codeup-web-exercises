<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>I can do this!!</title>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <link href="../CSS/weather-map.css">
    <!-- Custom CSS -->
    <style>
        #map {
            /* the width and height may be set to any size */
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>

<h1>Weather!!</h1>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>

<button id="zoom-in">Zoom In</button>
<button id="drop-marker">Drop Marker</button>
<script src="../../codeup-web-exercises/.gitignore/keys.js">keys</script>
<!-- Mapbox JS -->

<!-- Custom JS -->
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js"></script>
<script src="../js/mapbox-geocoder-utils.js"></script>
<script src='../js/weather-map.js'></script>
<script>
    (async function() {
         console.log(MAPBOX_API_KEY)
//when calling the js file use two periods.
        mapboxgl.accessToken = MAPBOX_API_KEY;
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 10,
            center: [-98, 28]
        });
//
//         function getLatLngFromAddress(address, token = MAPBOX_API_KEY) {
//             const baseUrl = 'https://api.mapbox.com';
//             const endPoint = '/geocoding/v5/mapbox.places/';
//             return fetch(baseUrl + endPoint + encodeURIComponent(address) + '.json' + "?" + 'access_token=' + token)
//                 .then(function(res) {
//                     return weathermap.json();
//                     // to get all the data from the request, comment out the following three lines...
//                 }).then(function(data) {
//                     console.log(data);
//                     return data.features[0].center;
//                 });
//         }
//
//         let coords = await getLatLngFromAddress("San Antonio, TX");
//         console.log(coords);
//
//         const sanAntonio = new mapboxgl.Marker();
//         sanAntonio.setLngLat(coords);
//         sanAntonio.addTo(map);
//
//         // when the zoom in button is clicked, decrease the map's zoom level
//         const zoomIn = document.querySelector("#zoom-in");
//         zoomIn.addEventListener("click", function (event) {
//             let currentZoom = map.getZoom();
//             currentZoom++;
//             map.setZoom(currentZoom);
//         });
//
//         document.querySelector("#drop-marker").addEventListener("click",
//             function (event) {
//                 // add a popup to this
//                 let popup = new mapboxgl.Popup();
//                 popup.setLngLat([-98, 28])
//                 popup.setHTML("<h1>Great Scott</h1><img src=../gif/creature.webp>")
//
//                 let marker = new mapboxgl.Marker();
//
//                 marker.setPopup(popup);
//                 marker.setLngLat([-98, 28]);
//                 marker.addTo(map);
//                 let queryParams = new URLSearchParams({
//                     APPID: OPEN_WEATHER_APPID,
//                     lat:    29.423017,
//                     lon:   -98.48527,
//                     units: "imperial"
//                 });
// // concat the query parameters onto the URL
// //                 fetch("http://api.openweathermap.org/data/2.5/onecall?" + queryParams, {
//                         method: "GET"
//                     }
//                 ).then(async function(response) {
//                     // use await to wait for the json data and then do something with it
//                     const data = await response.json();
//                     console.log('The entire response:', data);
//                     console.log('Diving in - here is current information: ', data.current);
//                     console.log('A step further - information for tomorrow: ', data.daily[1]);
//                 });
//             });



    })();

</script>
</body>
</html>